const widgets = [];

function fetchData(event) {
	const parser = new DOMParser();
	event.preventDefault();
	const input = document.getElementsByName('search')[0];
	if (input.value === '') {
		Materialize.toast('Your input is blank', 3000, 'rounded');
	} else {
		const text = fetch(`http://cors-bypass-proxy.axiomlogic.com/${input.value}`)
			.then(response => response.text())
			.then(text => parser.parseFromString(text, 'text/html'))
			.then(dom => createDataObject(dom))
			.then(console.log);
	}
}

function createDataObject(dom) {
	const widgetObj = {};
	const quoteContent = dom.getElementsByTagName('title')[0];
	const quoteText = quoteContent.innerText.replace(/[^\.]*$/, '');
	widgetObj.quote = quoteText;
	// widgetObj.author =
	return widgetObj;
}

function displayWidgets(widgets) {
	while (document.getElementById('display').firstChild) {
		document.getElementById('display').removeChild(document.getElementById('display').firstChild);
	}

	for (const widget of widgets) {
		const col = document.createElement('div').classList.add('col', 's12');
		const card = document.createElement('div').classList.add('card', 'hoverable');
		const content = document.createElement('div').classList.add('card-content', 'center');
	}
}
